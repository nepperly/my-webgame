<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>工作人员-安泉</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* === 基础样式 === */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: #e0f7fa;
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }
        

        @keyframes float {
            0% { transform: translateX(0) translateY(0); }
            50% { transform: translateX(30px) translateY(-15px); }
            100% { transform: translateX(0) translateY(0); }
        }
        
        /* 主容器 */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 25px;
        }
        
        /* === 顶部论坛导航栏 === */
        .forum-header {
            background: rgba(16, 36, 64, 0.9);
            border-radius: 20px;
            padding: 25px 30px;
            border: 1px solid rgba(128, 222, 234, 0.2);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            position: relative;
            overflow: hidden;
            border-left: 5px solid #80deea;
        }
        
        .forum-header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(90deg, #80deea, #00acc1, #80deea);
        }
        
        .forum-title {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .forum-title h1 {
            color: #80deea;
            font-size: 3rem;
            text-shadow: 0 0 15px rgba(128, 222, 234, 0.7);
            margin-bottom: 5px;
            letter-spacing: 3px;
        }
        
        .forum-subtitle {
            font-size: 1.1rem;
            color: #b2ebf2;
        }
        
        /* 功能栏 */
        .function-bar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid rgba(128, 222, 234, 0.2);
            flex-wrap: wrap;
            gap: 20px;
        }
        
        /* 用户操作区域 */
        .user-actions {
            display: flex;
            gap: 15px;
            flex-shrink: 0;
        }
        
        .user-btn {
            padding: 12px 25px;
            border-radius: 50px;
            border: 2px solid #80deea;
            background: rgba(16, 36, 64, 0.8);
            color: #80deea;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
            white-space: nowrap;
        }
        
        .user-btn:hover {
            background: rgba(128, 222, 234, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(128, 222, 234, 0.3);
        }
        
        .login-btn {
            border-color: #80deea;
        }
        
        /* 搜索框 */
        .search-box {
            flex: 1;
            display: flex;
            border: 2px solid #80deea;
            border-radius: 50px;
            overflow: hidden;
            min-width: 300px;
            max-width: 600px;
        }
        
        .search-box input {
            flex: 1;
            padding: 12px 20px;
            border: none;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
        }
        
        .search-box input:focus {
            outline: none;
        }
        
        .search-box button {
            padding: 12px 25px;
            border: none;
            background: linear-gradient(90deg, #00acc1, #00838f);
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            min-width: 100px;
            white-space: nowrap;
        }
        
        .search-box button:hover {
            background: linear-gradient(90deg, #00838f, #006064);
            box-shadow: 0 0 15px rgba(0, 172, 193, 0.5);
        }
        
        /* === 工作台主内容区 === */
        .workstation-container {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }
        
        /* 员工信息卡片 - 缩小版 */
        .employee-card {
            background: rgba(22, 33, 62, 0.9);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid rgba(128, 222, 234, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
            min-height: auto;
        }
        
        .employee-info {
            flex: 1;
        }
        
        .employee-name {
            font-size: 1.5rem;
            color: #80deea;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .employee-id {
            font-size: 1rem;
            color: #ffcc80;
            background: rgba(255, 204, 128, 0.1);
            padding: 4px 12px;
            border-radius: 15px;
            border: 1px solid rgba(255, 204, 128, 0.3);
        }
        
        .employee-stats {
            display: flex;
            gap: 20px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        
        .stat-item {
            display: flex;
            flex-direction: column;
            background: rgba(16, 36, 64, 0.6);
            padding: 12px 15px;
            border-radius: 8px;
            border: 1px solid rgba(128, 222, 234, 0.2);
            min-width: 150px;
        }
        
        .stat-label {
            font-size: 0.8rem;
            color: #b2ebf2;
            margin-bottom: 4px;
        }
        
        .stat-value {
            font-size: 1.4rem;
            font-weight: bold;
            color: #e0f7fa;
        }
        
        .stat-highlight {
            color: #ff8a65;
            border-color: rgba(255, 138, 101, 0.3);
        }
        
        .stat-alert {
            color: #ff8a65;
            border-color: rgba(255, 138, 101, 0.3);
        }
        
        .stat-normal {
            color: #80deea;
            border-color: rgba(128, 222, 234, 0.3);
        }
        
        .employee-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: white;
            border: 2px solid rgba(128, 222, 234, 0.5);
            margin-left: 20px;
        }
        
        /* 选项卡容器 */
        .tabs-container {
            display: flex;
            gap: 10px;
            margin-bottom: 0;
            background: rgba(16, 36, 64, 0.8);
            border-radius: 15px 15px 0 0;
            padding: 15px 20px 0 20px;
            border: 1px solid rgba(128, 222, 234, 0.2);
            border-bottom: none;
        }
        
        .tab {
            padding: 12px 20px;
            cursor: pointer;
            border-radius: 10px 10px 0 0;
            transition: all 0.3s;
            background: rgba(22, 33, 62, 0.6);
            border: 1px solid rgba(128, 222, 234, 0.2);
            border-bottom: none;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1rem;
        }
        
        .tab:hover {
            background: rgba(128, 222, 234, 0.1);
            transform: translateY(-2px);
        }
        
        .tab.active {
            background: rgba(22, 33, 62, 0.95);
            color: #80deea;
            border-bottom: 3px solid #80deea;
            font-weight: bold;
        }
        
        /* 内容区域 */
        .content-area {
            background: rgba(22, 33, 62, 0.95);
            border-radius: 0 15px 15px 15px;
            padding: 25px;
            min-height: 200px;
            border: 1px solid rgba(128, 222, 234, 0.2);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            overflow-y: auto;
            max-height: 600px;
        }
        
        .content-pane {
            display: none;
            animation: fadeIn 0.5s;
        }
        
        .content-pane.active {
            display: block;
        }
        
        /* === 安全状态页面样式 - 缩小版 === */
        .security-details-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .info-section {
            background: rgba(16, 36, 64, 0.6);
            border-radius: 10px;
            padding: 20px;
            border-left: 4px solid #10b981;
        }
        
        .info-section.personal {
            border-left-color: #3b82f6;
        }
        
        .info-section.security {
            border-left-color: #80deea;
        }
        
        .info-section.network {
            border-left-color: #f59e0b;
        }
        
        .info-section.data {
            border-left-color: #8b5cf6;
        }
        
        .section-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: #80deea;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .section-title i {
            font-size: 1.1rem;
        }
        
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 15px;
        }
        
        .info-item {
            display: flex;
            flex-direction: column;
            padding: 12px;
            background: rgba(51, 65, 85, 0.4);
            border-radius: 8px;
            border: 1px solid rgba(128, 222, 234, 0.2);
        }
        
        .info-label {
            font-size: 0.85rem;
            color: #94a3b8;
            margin-bottom: 5px;
        }
        
        .info-value {
            font-size: 1rem;
            color: #e2e8f0;
            font-weight: bold;
        }
        
        .permission-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }
        
        .permission-tag {
            background: rgba(59, 130, 246, 0.2);
            border: 1px solid rgba(59, 130, 246, 0.4);
            color: #dbeafe;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 0.85rem;
        }
        
        /* === 工作日志样式 === */
        .log-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .log-section {
            background: rgba(16, 36, 64, 0.6);
            border-radius: 10px;
            padding: 20px;
            border-left: 4px solid;
        }
        
        .log-section.system {
            border-left-color: #10b981;
        }
        
        .log-section.defense {
            border-left-color: #f59e0b;
        }
        
        .log-section.data {
            border-left-color: #8b5cf6;
        }
        
        .log-section.compliance {
            border-left-color: #3b82f6;
        }
        
        .log-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            color: #f1f5f9;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .log-title i {
            font-size: 1.1rem;
        }
        
        .log-item {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px dashed rgba(148, 163, 184, 0.3);
        }
        
        .log-item:last-child {
            margin-bottom: 0;
            padding-bottom: 0;
            border-bottom: none;
        }
        
        .log-meta {
            font-size: 0.9rem;
            color: #94a3b8;
            margin-bottom: 6px;
            display: flex;
            justify-content: space-between;
        }
        
        .log-content {
            line-height: 1.6;
            color: #e2e8f0;
            font-size: 1rem;
        }
        
        .log-content.highlight {
            background: rgba(239, 68, 68, 0.1);
            padding: 10px;
            border-radius: 6px;
            border-left: 3px solid #ef4444;
            margin-top: 6px;
            font-style: italic;
        }
        
        .log-todo {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid rgba(96, 165, 250, 0.3);
        }
        
        .todo-item {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            margin-bottom: 12px;
            padding: 12px;
            background: rgba(51, 65, 85, 0.4);
            border-radius: 8px;
            border: 1px solid rgba(128, 222, 234, 0.2);
        }
        
        .todo-item input[type="checkbox"] {
            margin-top: 4px;
            width: 16px;
            height: 16px;
            cursor: pointer;
        }
        
        .todo-item label {
            flex: 1;
            cursor: pointer;
            color: #e2e8f0;
            line-height: 1.4;
        }
        
        .todo-item input:checked + label {
            text-decoration: line-through;
            opacity: 0.6;
        }
        
        /* === 内部通讯样式 === */
        .chat-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            background: rgba(16, 36, 64, 0.6);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(128, 222, 234, 0.2);
        }
        
        .chat-tab {
            padding: 10px 20px;
            border-radius: 8px;
            background: rgba(30, 41, 59, 0.8);
            border: 1px solid rgba(96, 165, 250, 0.3);
            color: #94a3b8;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.95rem;
        }
        
        .chat-tab:hover {
            background: rgba(30, 41, 59, 0.9);
            transform: translateY(-2px);
        }
        
        .chat-tab.active {
            background: rgba(30, 41, 59, 0.95);
            color: #80deea;
            border-color: #80deea;
            font-weight: bold;
        }
        
        .chat-container {
            height: 500px;
            display: flex;
            flex-direction: column;
            background: rgba(15, 23, 42, 0.8);
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid rgba(128, 222, 234, 0.2);
        }
        
        .chat-header {
            background: rgba(30, 41, 59, 0.9);
            padding: 15px 20px;
            border-bottom: 1px solid rgba(96, 165, 250, 0.2);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .chat-user-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .chat-user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1rem;
        }
        
        .chat-user-details h3 {
            color: #80deea;
            font-size: 1.2rem;
            margin-bottom: 4px;
        }
        
        .chat-user-details p {
            color: #94a3b8;
            font-size: 0.9rem;
        }
        
        .chat-content {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            background: rgba(15, 23, 42, 0.5);
        }
        
        /* 自定义滚动条 */
        .chat-content::-webkit-scrollbar {
            width: 8px;
        }
        
        .chat-content::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
        }
        
        .chat-content::-webkit-scrollbar-thumb {
            background: #60a5fa;
            border-radius: 10px;
        }
        
        /* 消息气泡 */
        .message {
            display: flex;
            max-width: 85%;
        }
        
        .message.xueren, .message.yunying, .message.jiepo, .message.yanzi {
            align-self: flex-start;
        }
        
        .message.anquan {
            align-self: flex-end;
        }
        
        .message-content {
            margin: 0 8px;
            display: flex;
            flex-direction: column;
            min-width: 180px;
        }
        
        .message-sender {
            font-size: 0.9rem;
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .xueren .message-sender {
            color: #60a5fa;
        }
        
        .yunying .message-sender {
            color: #f59e0b;
        }
        
        .jiepo .message-sender {
            color: #8b5cf6;
        }
        
        /* 修改晏孜对话框颜色 - 使用更深的蓝色，与背景区分 */
        .yanzi .message-sender {
            color: #3b82f6;
        }
        
        .anquan .message-sender {
            color: #80deea;
        }
        
        .message-bubble {
            padding: 12px 16px;
            border-radius: 18px;
            position: relative;
            max-width: 100%;
            word-wrap: break-word;
            line-height: 1.5;
            font-size: 1rem;
        }
        
        .xueren .message-bubble {
            background: rgba(96, 165, 250, 0.2);
            border: 1px solid rgba(96, 165, 250, 0.4);
            border-top-left-radius: 6px;
            color: #dbeafe;
        }
        
        .yunying .message-bubble {
            background: rgba(245, 158, 11, 0.2);
            border: 1px solid rgba(245, 158, 11, 0.4);
            border-top-left-radius: 6px;
            color: #fef3c7;
        }
        
        .jiepo .message-bubble {
            background: rgba(139, 92, 246, 0.2);
            border: 1px solid rgba(139, 92, 246, 0.4);
            border-top-left-radius: 6px;
            color: #ede9fe;
        }
        
        /* 修改晏孜消息气泡颜色 - 使用更深的蓝色背景 */
        .yanzi .message-bubble {
            background: rgba(59, 130, 246, 0.3);
            border: 1px solid rgba(59, 130, 246, 0.5);
            border-top-left-radius: 6px;
            color: #dbeafe;
        }
        
        .anquan .message-bubble {
            background: rgba(128, 222, 234, 0.2);
            border: 1px solid rgba(128, 222, 234, 0.4);
            border-top-right-radius: 6px;
            color: #e0f7fa;
        }
        
        .message-time {
            font-size: 0.8rem;
            color: #94a3b8;
            margin-top: 6px;
        }
        
        .anquan .message-time {
            align-self: flex-end;
        }
        
        .chat-input-area {
            padding: 15px 20px;
            background: rgba(30, 41, 59, 0.9);
            border-top: 1px solid rgba(96, 165, 250, 0.2);
            display: flex;
            gap: 12px;
        }
        
        .chat-input {
            flex: 1;
            padding: 12px 16px;
            border-radius: 25px;
            border: 2px solid rgba(96, 165, 250, 0.4);
            background: rgba(15, 23, 42, 0.7);
            color: white;
            font-size: 1rem;
            outline: none;
            transition: all 0.3s;
        }
        
        .chat-input:focus {
            border-color: #60a5fa;
            box-shadow: 0 0 12px rgba(96, 165, 250, 0.3);
        }
        
        .chat-send-btn {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            border: none;
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.1rem;
            transition: all 0.3s;
        }
        
        .chat-send-btn:hover {
            background: linear-gradient(135deg, #2563eb, #1d4ed8);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.5);
        }
        
        /* === 工作人员信息管理表格 === */
        .personnel-table-container {
            overflow-x: auto;
            margin-top: 15px;
        }
        
        .personnel-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9rem;
        }
        
        .personnel-table th {
            background: rgba(16, 36, 64, 0.8);
            color: #80deea;
            padding: 12px 15px;
            text-align: left;
            border: 1px solid rgba(128, 222, 234, 0.2);
            font-weight: bold;
        }
        
        .personnel-table td {
            padding: 12px 15px;
            border: 1px solid rgba(128, 222, 234, 0.2);
            color: #e2e8f0;
        }
        
        .personnel-table tr:nth-child(even) {
            background: rgba(16, 36, 64, 0.4);
        }
        
        .personnel-table tr:hover {
            background: rgba(128, 222, 234, 0.1);
        }
        
        .personnel-table .highlight {
            background: rgba(128, 222, 234, 0.1);
            font-weight: bold;
            border-left: 3px solid #80deea;
        }
        
        /* === 底部信息 === */
        .footer {
            text-align: center;
            padding: 15px;
            background: rgba(16, 36, 64, 0.8);
            border-radius: 12px;
            border-top: 1px solid rgba(128, 222, 234, 0.2);
            margin-top: 15px;
            color: #b2ebf2;
            font-size: 0.9rem;
        }
        
        /* === 退出确认弹窗 === */
        .logout-confirm-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .logout-confirm-content {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            padding: 40px;
            border-radius: 20px;
            width: 90%;
            max-width: 400px;
            border: 2px solid #ffcc80;
            box-shadow: 0 0 50px rgba(255, 204, 128, 0.5);
            position: relative;
            text-align: center;
        }
        
        .logout-confirm-content h2 {
            color: #ffcc80;
            margin-bottom: 20px;
            font-size: 2rem;
        }
        
        .logout-confirm-content p {
            color: #b2ebf2;
            font-size: 1.2rem;
            margin-bottom: 30px;
            line-height: 1.6;
        }
        
        .logout-actions {
            display: flex;
            gap: 20px;
            justify-content: center;
        }
        
        .logout-btn {
            padding: 12px 30px;
            border-radius: 50px;
            border: 2px solid;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .logout-confirm-btn {
            background: linear-gradient(135deg, #ff6b6b, #ff5252);
            color: white;
            border-color: #ff6b6b;
        }
        
        .logout-confirm-btn:hover {
            background: linear-gradient(135deg, #ff5252, #ff3d3d);
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(255, 107, 107, 0.5);
        }
        
        .logout-cancel-btn {
            background: rgba(255, 255, 255, 0.1);
            color: #b2ebf2;
            border-color: #b2ebf2;
        }
        
        .logout-cancel-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }
        
        /* === 动画 === */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* === 响应式设计 === */
        @media (max-width: 1024px) {
            .employee-card {
                flex-direction: column;
                text-align: center;
                gap: 20px;
            }
            
            .employee-avatar {
                margin-left: 0;
            }
            
            .employee-stats {
                justify-content: center;
            }
            
            .info-grid {
                grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            }
        }
        
        @media (max-width: 768px) {
            .forum-title h1 {
                font-size: 2.2rem;
            }
            
            .function-bar {
                flex-direction: column;
                align-items: stretch;
                gap: 15px;
            }
            
            .user-actions {
                justify-content: center;
                flex-wrap: wrap;
            }
            
            .search-box {
                width: 100%;
                min-width: auto;
                max-width: none;
            }
            
            .employee-name {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }
            
            .employee-stats {
                flex-direction: column;
                align-items: center;
            }
            
            .stat-item {
                width: 100%;
                max-width: 250px;
            }
            
            .tabs-container {
                flex-direction: column;
                padding: 12px 12px 0 12px;
            }
            
            .tab {
                border-radius: 8px;
                margin-bottom: 5px;
            }
            
            .content-area {
                border-radius: 0 0 12px 12px;
                padding: 15px;
                max-height: 600px;
            }
            
            .info-grid {
                grid-template-columns: 1fr;
            }
            
            .chat-selector {
                flex-direction: column;
            }
            
            .chat-tab {
                width: 100%;
                justify-content: center;
            }
            
            .message {
                max-width: 95%;
            }
            
            .chat-input-area {
                flex-direction: column;
            }
            
            .chat-send-btn {
                width: 100%;
                border-radius: 25px;
                height: 45px;
            }
            
            .logout-actions {
                flex-direction: column;
                gap: 15px;
            }
            
            .personnel-table {
                font-size: 0.8rem;
            }
            
            .personnel-table th,
            .personnel-table td {
                padding: 8px 10px;
            }
        }
        
        @media (max-width: 480px) {
            .forum-title h1 {
                font-size: 1.8rem;
            }
            
            .user-btn {
                padding: 10px 18px;
                font-size: 0.9rem;
            }
            
            .search-box {
                flex-direction: column;
                border-radius: 50px;
            }
            
            .search-box input {
                border-radius: 50px;
                margin-bottom: 0;
            }
            
            .search-box button {
                border-radius: 50px;
                margin-top: 8px;
            }
            
            .employee-name {
                font-size: 1.4rem;
            }
            
            .employee-avatar {
                width: 70px;
                height: 70px;
                font-size: 1.8rem;
            }
            
            .content-pane {
                padding: 12px;
            }
            
            .log-title, .section-title {
                font-size: 1.1rem;
            }
            
            .chat-content {
                padding: 15px;
            }
            
            .logout-confirm-content {
                padding: 30px 20px;
                margin: 20px;
            }
        }
    </style>
</head>
<body>   
    <!-- 退出确认弹窗 -->
    <div class="logout-confirm-modal" id="logoutConfirmModal">
        <div class="logout-confirm-content">
            <h2><i class="fas fa-sign-out-alt"></i> 确认退出</h2>
            <p>确定要退出当前账号吗？<br>退出后将返回登录页面</p>
            <div class="logout-actions">
                <button class="logout-btn logout-confirm-btn" onclick="confirmLogout()">
                    <i class="fas fa-check"></i> 确定退出
                </button>
                <button class="logout-btn logout-cancel-btn" onclick="closeLogoutConfirm()">
                    <i class="fas fa-times"></i> 取消
                </button>
            </div>
        </div>
    </div>
    
    <div class="container">
        <!-- 顶部论坛导航栏 -->
        <div class="forum-header">
            <div class="forum-title">
                <h1>我是小神仙</h1>
                <div class="forum-subtitle">修仙论坛 - 安全技术部负责人工作台</div>
            </div>
            
            <!-- 功能栏 -->
            <div class="function-bar">
                <div class="user-actions">
                    <!-- 登录按钮显示为安泉 -->
                    <button class="user-btn login-btn" onclick="showLogoutConfirm()">
                        <i class="fas fa-user-tie"></i> 安泉
                    </button>
                </div>
                
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="搜索内容...">
                    <button onclick="handleSearch()">
                        <i class="fas fa-search"></i> 搜索
                    </button>
                </div>
            </div>
        </div>
        
        <!-- 工作台主内容区 -->
        <div class="workstation-container">
            <!-- 员工信息卡片 - 缩小版 -->
            <div class="employee-card">
                <div class="employee-info">
                    <div class="employee-name">
                        <span>安泉</span>
                        <span class="employee-id">工号: C001202301</span>
                    </div>
                    
                    <div class="employee-stats">
                        <div class="stat-item stat-normal">
                            <div class="stat-label">系统健康状况</div>
                            <div class="stat-value">正常</div>
                        </div>
                        <div class="stat-item stat-alert">
                            <div class="stat-label">实时告警</div>
                            <div class="stat-value">2条</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">今日拦截次数</div>
                            <div class="stat-value">47次</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">安全权限等级</div>
                            <div class="stat-value">Lv.5</div>
                        </div>
                    </div>
                </div>
                
                <div class="employee-avatar">
                    <i class="fas fa-shield-alt"></i>
                </div>
            </div>
            
            <!-- 选项卡 -->
            <div class="tabs-container">
                <div class="tab active" data-tab="security">
                    <i class="fas fa-shield-alt"></i> 安全状态
                </div>
                <div class="tab" data-tab="log">
                    <i class="fas fa-clipboard-list"></i> 工作日志
                </div>
                <div class="tab" data-tab="chat">
                    <i class="fas fa-comments"></i> 内部通讯
                </div>
            </div>
            
            <!-- 内容区域 -->
            <div class="content-area">
                <!-- 安全状态页面 -->
                <div class="content-pane active" id="security-pane">
                    <div class="security-details-container">
                        <!-- 个人信息 -->
                        <div class="info-section personal">
                            <h3 class="section-title"><i class="fas fa-user-circle"></i> 个人信息</h3>
                            <div class="info-grid">
                                <div class="info-item">
                                    <div class="info-label">姓名</div>
                                    <div class="info-value">安泉</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label">工号</div>
                                    <div class="info-value">C001202301</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label">部门</div>
                                    <div class="info-value">安全技术部</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label">职位</div>
                                    <div class="info-value">安全技术部负责人</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label">安全权限等级</div>
                                    <div class="info-value">Lv.5 (最高级)</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 安全状态 -->
                        <div class="info-section security">
                            <h3 class="section-title"><i class="fas fa-heartbeat"></i> 安全状态概览</h3>
                            <div class="info-grid">
                                <div class="info-item stat-normal">
                                    <div class="info-label">系统健康状况</div>
                                    <div class="info-value">正常</div>
                                </div>
                                <div class="info-item stat-alert">
                                    <div class="info-label">实时告警</div>
                                    <div class="info-value">2条 (低危)</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label">网络入侵防御系统</div>
                                    <div class="info-value">开启</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label">数据泄露监控</div>
                                    <div class="info-value">无异常</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 网络防御状态 -->
                        <div class="info-section network">
                            <h3 class="section-title"><i class="fas fa-network-wired"></i> 网络防御状态</h3>
                            <div class="info-grid">
                                <div class="info-item">
                                    <div class="info-label">今日拦截异常连接</div>
                                    <div class="info-value">47次</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label">防火墙状态</div>
                                    <div class="info-value">运行中</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label">入侵检测系统</div>
                                    <div class="info-value">在线</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label">加密通道状态</div>
                                    <div class="info-value">正常</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 权限信息 -->
                        <div class="info-section data">
                            <h3 class="section-title"><i class="fas fa-key"></i> 安全权限</h3>
                            <div class="permission-list">
                                <div class="permission-tag">系统管理员</div>
                                <div class="permission-tag">审计日志访问</div>
                                <div class="permission-tag">加密密钥管理</div>
                                <div class="permission-tag">渗透测试授权</div>
                                <div class="permission-tag">安全策略制定</div>
                                <div class="permission-tag">紧急响应指挥</div>
                                <div class="permission-tag">最高权限覆盖</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 工作日志页面 -->
                <div class="content-pane" id="log-pane">
                    <div class="log-container">
                        <!-- 实时留言 -->
                        <div class="log-section system">
                            <h3 class="log-title"><i class="fas fa-bell"></i> 实时留言</h3>
                            
                            <div class="log-item">
                                <div class="log-meta">
                                    <span><i class="fas fa-fire"></i> 防火墙</span>
                                    <span>今天 14:45</span>
                                </div>
                                <div class="log-content">
                                    检测到对员工后台查询接口的集中访问，行为符合例行审计模式，已标记为"授权巡检"。
                                </div>
                            </div>
                            
                            <div class="log-item">
                                <div class="log-meta">
                                    <span><i class="fas fa-brain"></i> 内容感知引擎</span>
                                    <span>今天 13:20</span>
                                </div>
                                <div class="log-content">
                                    识别出潜在映射性讨论集群，情感分析为"吐槽/娱乐"，无信息安全风险，已记录趋势。
                                </div>
                            </div>
                            
                            <div class="log-item">
                                <div class="log-meta">
                                    <span><i class="fas fa-eye"></i> 内容安全监控</span>
                                    <span>今天 11:05</span>
                                </div>
                                <div class="log-content">
                                    识别到"都市生活"版块出现新型图片隐写攻击特征，已自动隔离相关文件。
                                </div>
                            </div>
                        </div>
                        
                        <!-- 处理内容 -->
                        <div class="log-section defense">
                            <h3 class="log-title"><i class="fas fa-shield-alt"></i> 处理内容</h3>
                            
                            <div class="log-item">
                                <div class="log-content">
                                    <strong>1、主动防御层面：</strong>
                                    <ul style="margin-left: 20px; margin-top: 8px; list-style-type: disc; line-height: 1.6;">
                                        <li>完成对新型图片隐写攻击样本的逆向分析，特征码已全域部署。</li>
                                        <li>拦截并溯源3起针对高管隐私信息的爬虫试探（IP已封禁，情报上报）。</li>
                                        <li>对内部通讯系统进行了一次未公开的渗透测试（结果：无漏洞）。</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <div class="log-item">
                                <div class="log-content">
                                    <strong>2、数据安全与审计：</strong>
                                    <ul style="margin-left: 20px; margin-top: 8px; list-style-type: disc; line-height: 1.6;">
                                        <li>按晏孜要求，提供《督察安全参数标准模板（V2.1）》并加密发送。</li>
                                        <li>对"公司年终福利猜想"等7条敏感内容帖的访问记录进行交叉分析，未发现内部泄露迹象。</li>
                                        <li>对自身及部门所有成员的操作日志执行镜像备份与完整性校验。</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <div class="log-item">
                                <div class="log-content">
                                    <strong>3、系统与合规：</strong>
                                    <ul style="margin-left: 20px; margin-top: 8px; list-style-type: disc; line-height: 1.6;">
                                        <li>主持安全部晨会，部署下一季度攻防演练计划。</li>
                                        <li>向全员发布《终端设备安全使用提醒（第15号）》。</li>
                                        <li>准备周一面向督察组的专项培训材料。</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 备注/待办 -->
                        <div class="log-section compliance">
                            <h3 class="log-title"><i class="fas fa-sticky-note"></i> 备注/待办</h3>
                            
                            <div class="log-todo">
                                <div class="todo-item">
                                    <input type="checkbox" id="todo1">
                                    <label for="todo1">完成督察组安全规范培训（需准备实操案例）</label>
                                </div>
                                
                                <div class="todo-item">
                                    <input type="checkbox" id="todo2">
                                    <label for="todo2">审查近期所有高管相关话题的访问日志（优先级：高）</label>
                                </div>
                                
                                <div class="todo-item">
                                    <input type="checkbox" id="todo3">
                                    <label for="todo3">更新员工终端安全防护策略（计划明日发布）</label>
                                </div>
                                
                                <div class="todo-item">
                                    <input type="checkbox" id="todo4">
                                    <label for="todo4">向管理层提交月度安全报告</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- 内部通讯页面 -->
                <div class="content-pane" id="chat-pane">
                    <!-- 聊天对象选择器 -->
                    <div class="chat-selector">
                        <div class="chat-tab active" data-chat="yanzi">
                            晏孜
                        </div>
                        <div class="chat-tab" data-chat="xueren">
                            薛仁
                        </div>
                        <div class="chat-tab" data-chat="yunying">
                            云莹
                        </div>
                        <div class="chat-tab" data-chat="jiepo">
                            解珀
                        </div>
                    </div>
                    
                    <!-- 晏孜聊天界面 -->
                    <div class="chat-container" id="yanzi-chat">
                        <div class="chat-header">
                            <div class="chat-user-info">
                                <div class="chat-user-avatar" style="background: linear-gradient(135deg, #3b82f6, #2563eb);">晏</div>
                                <div class="chat-user-details">
                                    <h3>晏孜 (人事主管/督察)</h3>
                                </div>
                            </div>
                        </div>
                        
                        <div class="chat-content" id="yanziChatContent">
                            <!-- 日期：2024.1.5 -->
                            <div style="text-align: center; margin: 15px 0;">
                                <span style="background: rgba(30, 41, 59, 0.9); padding: 6px 15px; border-radius: 15px; font-size: 0.9rem; color: #94a3b8; border: 1px solid rgba(128, 222, 234, 0.2);">
                                    2024年1月5日
                                </span>
                            </div>
                            
                            <div class="message anquan">
                                <div class="message-content">
                                    <div class="message-sender">
                                        <i class="fas fa-shield-alt"></i> 安泉
                                    </div>
                                    <div class="message-bubble">
                                        参数模板已发你加密邮箱。另外，你最近的审计查询频次，在系统里有点显眼。
                                    </div>
                                </div>
                            </div>
                            
                            <div class="message yanzi">
                                <div class="message-content">
                                    <div class="message-sender">
                                        <i class="fas fa-user-tie"></i> 晏孜
                                    </div>
                                    <div class="message-bubble">
                                        例行自查，兼管某些人。你知道分寸。
                                    </div>
                                </div>
                            </div>
                            
                            <div class="message anquan">
                                <div class="message-content">
                                    <div class="message-sender">
                                        <i class="fas fa-shield-alt"></i> 安泉
                                    </div>
                                    <div class="message-bubble">
                                        明白。周一培训的演示案例，我会用虚拟数据，不会涉及真实业务日志。
                                    </div>
                                </div>
                            </div>
                            
                            <div class="message yanzi">
                                <div class="message-content">
                                    <div class="message-sender">
                                        <i class="fas fa-user-tie"></i> 晏孜
                                    </div>
                                    <div class="message-bubble">
                                        好。薛仁那边的问题清单，今天会发你。培训时侧重实操判断标准。
                                    </div>
                                </div>
                            </div>
                            
                            <div class="message anquan">
                                <div class="message-content">
                                    <div class="message-sender">
                                        <i class="fas fa-shield-alt"></i> 安泉
                                    </div>
                                    <div class="message-bubble">
                                        收到。还有，关于"年终福利"那条隐藏帖的访问记录，我查了，没有异常。但建议以后这类贴直接归档，而非隐藏。
                                    </div>
                                </div>
                            </div>
                            
                            <div class="message yanzi">
                                <div class="message-content">
                                    <div class="message-sender">
                                        <i class="fas fa-user-tie"></i> 晏孜
                                    </div>
                                    <div class="message-bubble">
                                        理由？
                                    </div>
                                </div>
                            </div>
                            
                            <div class="message anquan">
                                <div class="message-content">
                                    <div class="message-sender">
                                        <i class="fas fa-shield-alt"></i> 安泉
                                    </div>
                                    <div class="message-bubble">
                                        隐藏状态反而会激发某些人的查询欲望，留下审计痕迹。归档则更彻底。
                                    </div>
                                </div>
                            </div>
                            
                            <div class="message yanzi">
                                <div class="message-content">
                                    <div class="message-sender">
                                        <i class="fas fa-user-tie"></i> 晏孜
                                    </div>
                                    <div class="message-bubble">
                                        知道了。按你说的办。
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="chat-input-area">
                            <input type="text" class="chat-input" id="yanzi-chat-input" placeholder="输入消息给晏孜...">
                            <button class="chat-send-btn" onclick="sendMessage('yanzi')">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                    
                    <!-- 薛仁聊天界面 -->
                    <div class="chat-container" id="xueren-chat" style="display: none;">
                        <div class="chat-header">
                            <div class="chat-user-info">
                                <div class="chat-user-avatar" style="background: linear-gradient(135deg, #3b82f6, #60a5fa);">薛</div>
                                <div class="chat-user-details">
                                    <h3>薛仁</h3>
                                </div>
                            </div>
                        </div>
                        
                        <div class="chat-content" id="xuerenChatContent">
                            <!-- 日期：2024.1.5 -->
                            <div style="text-align: center; margin: 15px 0;">
                                <span style="background: rgba(30, 41, 59, 0.9); padding: 6px 15px; border-radius: 15px; font-size: 0.9rem; color: #94a3b8; border: 1px solid rgba(128, 222, 234, 0.2);">
                                    2024年1月5日
                                </span>
                            </div>
                            
                            <div class="message xueren">
                                <div class="message-content">
                                    <div class="message-sender">
                                        <i class="fas fa-user-shield"></i> 薛仁
                                    </div>
                                    <div class="message-bubble">
                                        安泉负责人您好！晏主管让我把督察中发现的问题清单发给您，方便培训时参考。文件已通过安全渠道发送，请查收！
                                    </div>
                                </div>
                            </div>
                            
                            <div class="message anquan">
                                <div class="message-content">
                                    <div class="message-sender">
                                        <i class="fas fa-shield-alt"></i> 安泉
                                    </div>
                                    <div class="message-bubble">
                                        已收到。看了，问题很具体，适合做案例。周一我会逐一讲解合规依据和判断阈值。
                                    </div>
                                </div>
                            </div>
                            
                            <div class="message xueren">
                                <div class="message-content">
                                    <div class="message-sender">
                                        <i class="fas fa-user-shield"></i> 薛仁
                                    </div>
                                    <div class="message-bubble">
                                        太好了！谢谢！另外……想请教一下，图片隐写检测的新特征码，我们审核端能看到风险评分吗？
                                    </div>
                                </div>
                            </div>
                            
                            <div class="message anquan">
                                <div class="message-content">
                                    <div class="message-sender">
                                        <i class="fas fa-shield-alt"></i> 安泉
                                    </div>
                                    <div class="message-bubble">
                                        不会。你们只会收到"内容疑似异常，待安全复核"的提示。底层数据和分析过程不可见，这是权限隔离。
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="chat-input-area">
                            <input type="text" class="chat-input" id="xueren-chat-input" placeholder="输入消息给薛仁...">
                            <button class="chat-send-btn" onclick="sendMessage('xueren')">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                    
                    <!-- 云莹聊天界面 -->
                    <div class="chat-container" id="yunying-chat" style="display: none;">
                        <div class="chat-header">
                            <div class="chat-user-info">
                                <div class="chat-user-avatar" style="background: linear-gradient(135deg, #f59e0b, #d97706);">云</div>
                                <div class="chat-user-details">
                                    <h3>云莹</h3>
                                </div>
                            </div>
                        </div>
                        
                        <div class="chat-content" id="yunyingChatContent">
                            <!-- 日期：2023.11.1 -->
                            <div style="text-align: center; margin: 15px 0;">
                                <span style="background: rgba(30, 41, 59, 0.9); padding: 6px 15px; border-radius: 15px; font-size: 0.9rem; color: #94a3b8; border: 1px solid rgba(128, 222, 234, 0.2);">
                                    2023年11月1日
                                </span>
                            </div>
                            
                            <div class="message yunying">
                                <div class="message-content">
                                    <div class="message-sender">
                                        <i class="fas fa-user-cog"></i> 云莹
                                    </div>
                                    <div class="message-bubble">
                                        安泉，运营这边监测到一个异常账号在批量爬取用户公开信息，需要立刻追踪源头。公司查这种事的内部网址是哪个？我记得有个专门的追踪平台。
                                    </div>
                                </div>
                            </div>
                            
                            <div class="message anquan">
                                <div class="message-content">
                                    <div class="message-sender">
                                        <i class="fas fa-shield-alt"></i> 安泉
                                    </div>
                                    <div class="message-bubble">
                                        这里是网址：https://nepperly.github.io/my-webgame/%E4%BD%95%E6%97%B6%E8%90%BD%E4%B8%8B%E7%9A%84%E9%9B%AA%E8%8A%B1/%E4%BD%95%E6%97%B6%E8%90%BD%E4%B8%8B%E7%9A%84%E9%9B%AA%E8%8A%B1/game/web/zhuizong.html
                                    </div>
                                </div>
                            </div>
                            
                            <div class="message yunying">
                                <div class="message-content">
                                    <div class="message-sender">
                                        <i class="fas fa-user-cog"></i> 云莹
                                    </div>
                                    <div class="message-bubble">
                                        需要我这边提前报备吗？
                                    </div>
                                </div>
                            </div>
                            
                            <div class="message anquan">
                                <div class="message-content">
                                    <div class="message-sender">
                                        <i class="fas fa-shield-alt"></i> 安泉
                                    </div>
                                    <div class="message-bubble">
                                        用，你一会儿来我这里再填一个纸质的表格，顺便我把密钥什么的给你。
                                    </div>
                                </div>
                            </div>
                            
                            <div class="message yunying">
                                <div class="message-content">
                                    <div class="message-sender">
                                        <i class="fas fa-user-cog"></i> 云莹
                                    </div>
                                    <div class="message-bubble">
                                        好。
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="chat-input-area">
                            <input type="text" class="chat-input" id="yunying-chat-input" placeholder="输入消息给云莹...">
                            <button class="chat-send-btn" onclick="sendMessage('yunying')">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                    
                    <!-- 解珀聊天界面 -->
                    <div class="chat-container" id="jiepo-chat" style="display: none;">
                        <div class="chat-header">
                            <div class="chat-user-info">
                                <div class="chat-user-avatar" style="background: linear-gradient(135deg, #8b5cf6, #7c3aed);">解</div>
                                <div class="chat-user-details">
                                    <h3>解珀</h3>
                                </div>
                            </div>
                        </div>
                        
                        <div class="chat-content" id="jiepoChatContent">
                            <!-- 日期：2023.11.10 -->
                            <div style="text-align: center; margin: 15px 0;">
                                <span style="background: rgba(30, 41, 59, 0.9); padding: 6px 15px; border-radius: 15px; font-size: 0.9rem; color: #94a3b8; border: 1px solid rgba(128, 222, 234, 0.2);">
                                    2023年11月10日
                                </span>
                            </div>
                            
                            <div class="message anquan">
                                <div class="message-content">
                                    <div class="message-sender">
                                        <i class="fas fa-shield-alt"></i> 安泉
                                    </div>
                                    <div class="message-bubble">
                                        珀哥，密钥。
                                    </div>
                                </div>
                            </div>
                            
                            <div class="message jiepo">
                                <div class="message-content">
                                    <div class="message-sender">
                                        <i class="fas fa-user-ninja"></i> 解珀
                                    </div>
                                    <div class="message-bubble">
                                        谁要用？
                                    </div>
                                </div>
                            </div>
                            
                            <div class="message anquan">
                                <div class="message-content">
                                    <div class="message-sender">
                                        <i class="fas fa-shield-alt"></i> 安泉
                                    </div>
                                    <div class="message-bubble">
                                        上面那边说是要查案子。
                                    </div>
                                </div>
                            </div>
                            
                            <div class="message jiepo">
                                <div class="message-content">
                                    <div class="message-sender">
                                        <i class="fas fa-user-ninja"></i> 解珀
                                    </div>
                                    <div class="message-bubble">
                                        啧……叫他们直接来找我。
                                    </div>
                                </div>
                            </div>
                            
                            <div class="message anquan">
                                <div class="message-content">
                                    <div class="message-sender">
                                        <i class="fas fa-shield-alt"></i> 安泉
                                    </div>
                                    <div class="message-bubble">
                                        知道了。哥，你态度好的点。
                                    </div>
                                </div>
                            </div>
                            
                            <div class="message jiepo">
                                <div class="message-content">
                                    <div class="message-sender">
                                        <i class="fas fa-user-ninja"></i> 解珀
                                    </div>
                                    <div class="message-bubble">
                                        好好好。
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="chat-input-area">
                            <input type="text" class="chat-input" id="jiepo-chat-input" placeholder="输入消息给解珀...">
                            <button class="chat-send-btn" onclick="sendMessage('jiepo')">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 登录状态变量
        let isLoggedIn = true;
        let currentUser = '安泉';
        let currentChat = 'yanzi';
        
        // 主选项卡切换
        document.addEventListener('DOMContentLoaded', function() {
            // 主选项卡切换
            const tabs = document.querySelectorAll('.tab');
            const panes = document.querySelectorAll('.content-pane');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    
                    // 更新选项卡状态
                    tabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // 更新内容面板
                    panes.forEach(pane => {
                        pane.classList.remove('active');
                        if (pane.id === `${tabId}-pane`) {
                            pane.classList.add('active');
                        }
                    });
                    
                    // 如果是聊天页面，确保当前聊天界面正确显示
                    if (tabId === 'chat') {
                        showChat(currentChat);
                    }
                });
            });
            
            // 聊天对象切换
            const chatTabs = document.querySelectorAll('.chat-tab');
            chatTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const chatId = this.getAttribute('data-chat');
                    
                    // 更新聊天选项卡状态
                    chatTabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // 切换聊天界面
                    showChat(chatId);
                    currentChat = chatId;
                });
            });
            
            // 聊天输入框回车发送
            document.getElementById('yanzi-chat-input')?.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage('yanzi');
                }
            });
            
            document.getElementById('xueren-chat-input')?.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage('xueren');
                }
            });
            
            document.getElementById('yunying-chat-input')?.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage('yunying');
                }
            });
            
            document.getElementById('jiepo-chat-input')?.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage('jiepo');
                }
            });
            
            // 待办事项复选框功能
            document.querySelectorAll('.todo-item input[type="checkbox"]').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const label = this.nextElementSibling;
                    if (this.checked) {
                        label.style.textDecoration = 'line-through';
                        label.style.opacity = '0.6';
                    } else {
                        label.style.textDecoration = 'none';
                        label.style.opacity = '1';
                    }
                });
            });
            
            // 初始化：聊天页面滚动到底部
            scrollChatToBottom('yanzi');
            scrollChatToBottom('xueren');
            scrollChatToBottom('yunying');
            scrollChatToBottom('jiepo');
        });
        
        // 显示聊天界面
        function showChat(chatId) {
            // 隐藏所有聊天界面
            document.getElementById('yanzi-chat').style.display = 'none';
            document.getElementById('xueren-chat').style.display = 'none';
            document.getElementById('yunying-chat').style.display = 'none';
            document.getElementById('jiepo-chat').style.display = 'none';
            
            // 显示当前聊天界面
            document.getElementById(`${chatId}-chat`).style.display = 'flex';
            
            // 滚动到底部
            setTimeout(() => {
                scrollChatToBottom(chatId);
            }, 50);
        }
        
        // 滚动聊天到底部
        function scrollChatToBottom(chatId) {
            const chatContent = document.getElementById(`${chatId}ChatContent`);
            if (chatContent) {
                chatContent.scrollTop = chatContent.scrollHeight;
            }
        }
        
        // 聊天功能
        function sendMessage(chatId) {
            const chatInput = document.getElementById(`${chatId}-chat-input`);
            const message = chatInput.value.trim();
            
            if (message) {
                // 创建新消息元素
                const chatContent = document.getElementById(`${chatId}ChatContent`);
                const now = new Date();
                const timeStr = `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;
                
                const messageDiv = document.createElement('div');
                messageDiv.className = 'message anquan';
                messageDiv.innerHTML = `
                    <div class="message-content">
                        <div class="message-sender">
                            <i class="fas fa-shield-alt"></i> 安泉
                        </div>
                        <div class="message-bubble">${message}</div>
                        <div class="message-time">${timeStr}</div>
                    </div>
                `;
                
                chatContent.appendChild(messageDiv);
                chatInput.value = '';
                
                // 滚动到底部
                scrollChatToBottom(chatId);
            }
        }
        
        // ========== 功能函数 ==========
        
        // 显示退出确认弹窗
        function showLogoutConfirm() {
            document.getElementById('logoutConfirmModal').style.display = 'flex';
        }
        
        function closeLogoutConfirm() {
            document.getElementById('logoutConfirmModal').style.display = 'none';
        }
        
        // 确认退出
        function confirmLogout() {
            // 清空登录状态标记
            localStorage.removeItem('anquan_welcome_shown');
            
            // 显示退出消息
            showLogoutMessage();
            
            // 1秒后跳转到forum.html - 修改为在新窗口打开
            setTimeout(() => {
                window.open('forum.html', '_blank');
            }, 1000);
        }
        
        // 显示退出消息
        function showLogoutMessage() {
            // 创建退出消息框
            const logoutBox = document.createElement('div');
            logoutBox.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(135deg, #1a1a2e, #16213e);
                color: #80deea;
                padding: 15px 25px;
                border-radius: 10px;
                border: 2px solid #ffcc80;
                box-shadow: 0 0 30px rgba(255, 204, 128, 0.5);
                z-index: 1000;
                max-width: 400px;
                animation: slideIn 0.5s ease-out;
            `;
            
            logoutBox.innerHTML = `
                <div style="text-align: center;">
                    <i class="fas fa-sign-out-alt" style="font-size: 24px; color: #ffcc80; margin-bottom: 10px;"></i>
                    <div style="font-weight: bold; margin-bottom: 5px;">退出成功！</div>
                    <div style="font-size: 0.9em; color: #ffcc80;">正在退出 安泉 账号...</div>
                    <div style="margin-top: 10px; font-size: 0.8em; color: #b2ebf2;">
                        <i class="fas fa-spinner fa-spin"></i> 即将在新窗口打开登录页面...
                    </div>
                </div>
            `;
            
            document.body.appendChild(logoutBox);
            
            // 1秒后移除消息框
            setTimeout(() => {
                logoutBox.style.animation = 'slideOut 0.5s ease-out';
                setTimeout(() => logoutBox.remove(), 500);
            }, 1000);
            
            // 添加CSS动画（如果尚未添加）
            if (!document.querySelector('#animation-styles')) {
                const style = document.createElement('style');
                style.id = 'animation-styles';
                style.textContent = `
                    @keyframes slideIn {
                        from { transform: translateX(100%); opacity: 0; }
                        to { transform: translateX(0); opacity: 1; }
                    }
                    @keyframes slideOut {
                        from { transform: translateX(0); opacity: 1; }
                        to { transform: translateX(100%); opacity: 0; }
                    }
                `;
                document.head.appendChild(style);
            }
            
            // 关闭弹窗
            closeLogoutConfirm();
        }
        
        // 搜索功能 - 智能跳转 - 修改为在新窗口打开
        const searchMap = {
            '临新区': 'linxinqu.html',
            '晏孜': 'yanzi.html', 
            '安泉': 'C.html',
            '薛仁': 'xueren.html',
            '杠精': 'gangjing.html',
            '我就叫杠精怎么了': 'gangjing.html',
            '解珀': 'jiepo.html',
            '新手村': 'xinshoucun.html',
        };
        
        function handleSearch() {
            const searchInput = document.getElementById('searchInput');
            const searchTerm = searchInput.value.trim();
            
            if (!searchTerm) {
                alert('请输入搜索内容！');
                searchInput.focus();
                return;
            }
            
            let targetPage = null;
            
            // 1. 精确匹配
            if (searchMap[searchTerm]) {
                targetPage = searchMap[searchTerm];
            } 
            // 2. 模糊匹配（包含搜索词）
            else {
                for (const [keyword, page] of Object.entries(searchMap)) {
                    if (searchTerm.toLowerCase().includes(keyword.toLowerCase())) {
                        targetPage = page;
                        break;
                    }
                }
            }
            
            // 3. 默认跳转页面
            if (!targetPage) {
                targetPage = 'cuowu.html';
            }
            
            // 修改为在新窗口打开
            window.open(targetPage, '_blank');
        }
        
        // 按回车键搜索
        document.getElementById('searchInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                handleSearch();
            }
        });
        
        // 显示欢迎消息
        function showWelcomeMessage() {
            const welcomeBox = document.createElement('div');
            welcomeBox.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: linear-gradient(135deg, #1a1a2e, #16213e);
                color: #80deea;
                padding: 15px 25px;
                border-radius: 10px;
                border: 2px solid #80deea;
                box-shadow: 0 0 10px rgba(128, 222, 234, 0.5);
                z-index: 1000;
                max-width: 400px;
                animation: fadeIn 0.5s ease-out;
            `;
            
            welcomeBox.innerHTML = `
                <div style="text-align: center;">
                    <i class="fas fa-shield-alt" style="font-size: 24px; color: #80deea; margin-bottom: 10px;"></i>
                    <div style="font-weight: bold; margin-bottom: 5px;">欢迎回来，安泉！</div>
                </div>
            `;
            
            document.body.appendChild(welcomeBox);
            
            // 3秒后移除消息框
            setTimeout(() => {
                welcomeBox.style.animation = 'fadeOut 0.5s ease-out';
                setTimeout(() => welcomeBox.remove(), 500);
            }, 3000);
            
            // 添加淡入淡出动画
            if (!document.querySelector('#fade-animation-styles')) {
                const style = document.createElement('style');
                style.id = 'fade-animation-styles';
                style.textContent = `
                    @keyframes fadeIn {
                        from { opacity: 0; transform: translateX(-50%) translateY(-20px); }
                        to { opacity: 1; transform: translateX(-50%) translateY(0); }
                    }
                    @keyframes fadeOut {
                        from { opacity: 1; transform: translateX(-50%) translateY(0); }
                        to { opacity: 0; transform: translateX(-50%) translateY(-20px); }
                    }
                `;
                document.head.appendChild(style);
            }
            
            // 设置标记，表示已显示过欢迎消息
            localStorage.setItem('anquan_welcome_shown', 'true');
        }
        
        // 页面加载时的初始化
        window.onload = function() {
            // 检查是否已经显示过欢迎消息
            const welcomeShown = localStorage.getItem('anquan_welcome_shown');
            
            // 如果是从登录页面跳转过来（URL中有参数）或者第一次访问，显示欢迎消息
            const urlParams = new URLSearchParams(window.location.search);
            const fromLogin = urlParams.get('from') === 'login';
            
            if (fromLogin || !welcomeShown) {
                // 延迟显示欢迎消息，让页面先加载
                setTimeout(() => {
                    showWelcomeMessage();
                }, 500);
                
                // 如果是通过参数进来的，清除URL参数
                if (fromLogin) {
                    window.history.replaceState({}, document.title, window.location.pathname);
                }
            }
        };
        
        // 点击弹窗外部关闭
        window.onclick = function(event) {
            const modal = document.getElementById('logoutConfirmModal');
            
            if (event.target === modal) {
                closeLogoutConfirm();
            }
        }
    </script>
</body>

</html>

